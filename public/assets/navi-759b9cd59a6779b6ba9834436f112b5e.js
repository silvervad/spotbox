function navi(){function o(){return v.is(":visible")?(console.log("map closed"),!0):(console.log("map opened"),!1)}function n(){classie.remove(button_toggle_map,"icon-image"),classie.add(button_toggle_map,"icon-compass2"),classie.add(canvas,"photos"),button_toggle_map.title="Map"}function e(){classie.remove(button_toggle_map,"icon-compass2"),classie.add(button_toggle_map,"icon-image"),classie.remove(canvas,"photos"),button_toggle_map.title="Photos"}function t(){o()?(e(),console.log("openMap")):(n(),console.log("closeMap")),v.toggle("slow"),s()}function a(){return classie.has(nav_bar,"info-closed")?(console.log("info-closed"),!0):(console.log("info-opened"),!1)}function i(){classie.remove(nav_bar,"info-opened"),classie.add(nav_bar,"info-closed"),button_toggle_info.title="Open Info",classie.remove(button_toggle_info,"icon-circle-up"),classie.add(button_toggle_info,"icon-circle-down"),console.log("closeInfo")}function l(){classie.remove(nav_bar,"info-closed"),classie.add(nav_bar,"info-opened"),button_toggle_info.title="Close Info",classie.remove(button_toggle_info,"icon-circle-down"),classie.add(button_toggle_info,"icon-circle-up"),console.log("openInfo")}function c(){a()?l():i(),s()}function s(){var o=$("#info-bar"),n=(document.body.clientWidth,document.body.clientHeight),e=nav_bar.clientHeight;o.height(a()?0:classie.has(canvas,"photos")?n-b-e:n-m-e),setTimeout(function(){o.nanoScroller()},600),console.log("scale_menu")}function g(){return classie.has(nav_bar,"nav-closed")?(console.log("nav_closed"),!0):(console.log("nav_opened"),!1)}function d(){classie.add(nav_bar,"nav-closed"),button_toggle_nav.title="Open Navigation",classie.remove(button_toggle_nav,"icon-circle-right"),classie.add(button_toggle_nav,"icon-circle-left"),setTimeout(function(){classie.add(nav_text,"nav-closed")},100),console.log("closeNav")}function r(){classie.remove(nav_bar,"nav-closed"),button_toggle_nav.title="Close Navigation",classie.remove(button_toggle_nav,"icon-circle-left"),classie.add(button_toggle_nav,"icon-circle-right"),setTimeout(function(){classie.remove(nav_text,"nav-closed")},400),console.log("openNav")}function _(){g()?r():d()}function u(){var o,n,e=document.createElement("div"),t={transition:"transitionend",OTransition:"otransitionend",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(o in t)if(t.hasOwnProperty(o)&&e.style[o]!==n)return t[o]}var v=$("#rama-canvas"),b=79,m=13;canvas=document.getElementById("canvas"),nav_bar=document.getElementById("nav-bar"),button_toggle_map=document.getElementById("button-toggle-map"),button_toggle_info=document.getElementById("button-toggle-info"),button_toggle_nav=document.getElementById("button-toggle-nav"),nav_text=document.getElementById("nav-text"),info_bar=document.getElementById("info-bar"),transitionEnd=u(),s(),$(window).bind("resize",s),$(window).bind("orientationchange",s),button_toggle_nav.onclick=_,button_toggle_info.onclick=c,button_toggle_map&&(button_toggle_map.onclick=t),nav_bar.addEventListener(transitionEnd,s,!1)}window.addEventListener("load",navi);